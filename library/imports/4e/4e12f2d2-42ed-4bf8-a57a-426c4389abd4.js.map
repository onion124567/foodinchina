{"version":3,"sources":["assets\\scripts\\Game.js"],"names":["PokerUtil","require","AIHelper","self","cc","Class","Component","properties","menuView","type","Button","coinValueView","Label","menuList","Layout","outerMenu","helpMenu","customPrefab","Prefab","floor1","floor2","floor3","floor4","onLoad","node","on","menuCallback","helperClick","outerClick","customEntry","width","active","floorNode","orgLocation","distance","newCustom","instantiate","addChild","setPosition","v2","schedule","move","seq","repeat","sequence","moveBy","runAction","director","loadScene","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nlet PokerUtil = require(\"PokerUtil\");\r\nlet AIHelper = require(\"AIHelper\");\r\nlet self;\r\n/**\r\n * 经营阶段主界面\r\n *  经营阶段,每天有6个抉择，\r\n *  可在店内帮工/监工，出随机事件\r\n *  可出外采购，试吃学习菜谱，可挖掘食材，\r\n *  也能碰到广告、厨师争霸及卫生检查等消息\r\n *  随时可以调整场地\r\n */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        menuView: {\r\n            default: null,\r\n            type: cc.Button,\r\n        },\r\n        coinValueView: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        menuList: {\r\n            default: null,\r\n            type: cc.Layout,\r\n        },\r\n        outerMenu: {\r\n            default: null,\r\n            type: cc.Button,\r\n        },\r\n        helpMenu: {\r\n            default: null,\r\n            type: cc.Button,\r\n        },\r\n        customPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        floor1:{\r\n            default: null,\r\n            type: cc.Layout,\r\n        },\r\n        floor2:{\r\n            default: null,\r\n            type: cc.Layout,\r\n        },\r\n        floor3:{\r\n            default: null,\r\n            type: cc.Layout,\r\n        },\r\n        floor4:{\r\n            default: null,\r\n            type: cc.Layout,\r\n        }\r\n    },\r\n\r\n    onLoad: function () {\r\n        self=this;\r\n        this.menuView.node.on('click', this.menuCallback, this);\r\n        this.helpMenu.node.on('click', this.helperClick, this);\r\n        this.outerMenu.node.on('click', this.outerClick, this);\r\n            // 这里的 this 指向 component\r\n            this.customEntry(this.floor1.node,this.floor1.node.width,this.floor1.node.width);\r\n            this.customEntry(this.floor1.node,this.floor1.node.width,this.floor1.node.width/2);\r\n    },\r\n    menuCallback:function(){\r\n        if(this.menuList.node.active){\r\n            this.menuList.node.active=false;\r\n        }else {\r\n            this.menuList.node.active=true;\r\n        }\r\n\r\n    },\r\n    customEntry:function(floorNode,orgLocation,distance){\r\n        let newCustom = cc.instantiate(this.customPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        floorNode.addChild(newCustom);\r\n        newCustom.setPosition(cc.v2(orgLocation-50, -50));\r\n        this.schedule(function() {\r\n            this.move(newCustom,distance);\r\n        }, 5);\r\n\r\n    },\r\n    move:function(node,distance){\r\n        // 创建一个移动动作\r\n        let seq = cc.repeat(\r\n            cc.sequence(\r\n                cc.moveBy(2,  -distance, 50),\r\n                cc.moveBy(2,distance, -50)\r\n            ), 2);\r\n\r\n\r\n// 执行动作\r\n        node.runAction(seq);\r\n// 停止一个动作\r\n//         node.stopAction(action);\r\n    },\r\n    /**\r\n     * 外出 切换场景\r\n     */\r\n    outerClick:function(){\r\n        cc.director.loadScene('outerchoice');\r\n\r\n    },\r\n    /**\r\n     * 帮工 随机增加少量人气\r\n     */\r\n    helperClick:function() {\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n    update: function (dt) {\r\n        // 每帧更新计时器，超过限度还没有生成新的星星\r\n        // 就会调用游戏失败逻辑\r\n        // if (this.timer > this.starDuration) {\r\n        //     this.gameOver();\r\n        //     this.enabled = false;   // disable gameOver logic to avoid load scene repeatedly\r\n        //     return;\r\n        // }\r\n        // this.timer += dt;\r\n    },\r\n\r\n});\r\n"]}